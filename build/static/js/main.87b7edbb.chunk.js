(this["webpackJsonponline-store"]=this["webpackJsonponline-store"]||[]).push([[0],{43:function(e,t,a){e.exports=a(73)},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),l=a(13),u=a(10),s=a(42),i=a(16),m="REQUEST_PRODUCTS",d="REQUEST_SUCCESS_PRODUCTS",p="REQUEST_FAIL_PRODUCTS",E="ADD_CART",f="REMOVE_CART",v="REMOVE_ITEM_CART",b="REMOVE_ALL_CART",g={isLoading:!1,data:[]},O=a(15),h=function(e){localStorage.setItem("cart",JSON.stringify(e))},y=function(){return JSON.parse(localStorage.getItem("cart"))||[]},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y(),t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case E:var r=n.product,c=n.count,o=e.findIndex((function(e){return e.name===r.name}));if(-1===o){var l=e.concat(Object(i.a)({},r,{count:1}));return h(l),l}return c?e[o].count=c:e[o].count++,h(Object(O.a)(e)),Object(O.a)(e);case f:var u=n.product,s=e.findIndex((function(e){return e.name===u.name}));return e[s].count--,h(Object(O.a)(e)),Object(O.a)(e);case v:var m=n.product,d=e.findIndex((function(e){return e.name===m.name}));return e.splice(d,1),h(Object(O.a)(e)),Object(O.a)(e);case b:return h([]),[];default:return e}},j=Object(u.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case m:return Object(i.a)({},e,{isLoading:!0});case d:return Object(i.a)({},e,{data:n.data,isLoading:!1});case p:return Object(i.a)({},e,{isLoading:!1});default:return e}},cart:N,dealers:N}),C=a(19),_=a.n(C),S=a(20);function w(e){return{type:m,payload:{dealers:e}}}function k(e){return{type:d,payload:{data:e}}}function x(e,t){return{type:E,payload:{product:e,count:t}}}var T=a(40),I=a.n(T),L="https://murmuring-tor-81614.herokuapp.com/api",R={getProducts:function(e){var t=e&&e.length?"".concat(L,"/goods/?dealers=").concat(e):"".concat(L,"/goods");return I.a.get(t).then((function(e){return e.data}))},URL:"https://murmuring-tor-81614.herokuapp.com"},P=_.a.mark(U),A=_.a.mark(F);function U(e){var t,a;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload.dealers,n.next=4,Object(S.a)(R.getProducts,t);case 4:return a=n.sent,n.next=7,Object(S.b)(k(a));case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(S.b)((n.t0,{type:p,payload:{isLoading:!1}}));case 13:case"end":return n.stop()}}),P,null,[[0,9]])}function F(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.c)(m,U);case 2:case"end":return e.stop()}}),A)}var D=F,q=a(18),M=a(14),B=function(e){var t=e.product,a=e.children;return r.a.createElement("div",{className:"card px-20"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(R.URL).concat(t.image,")")},className:"bg-img"}),r.a.createElement("h4",null,t.name),a)},J=function(){return r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"indeterminate"}))},V={requestProducts:w,addToCart:x},Q=Object(l.b)((function(e){return{products:e.products.data,dealers:e.dealers,isLoading:e.products.isLoading}}),V)((function(e){var t=e.products,a=e.dealers,c=e.isLoading,o=e.requestProducts,l=e.addToCart;return Object(n.useEffect)((function(){o(a)}),[]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col",s:12},r.a.createElement("h1",null,"\u0422\u043e\u0432\u0430\u0440\u044b"))),r.a.createElement("div",{className:"row"},c?r.a.createElement(J,null):t.map((function(e,t){return r.a.createElement("div",{key:t,className:"col s12 m6 l4 mb-3"},r.a.createElement(B,{product:e},r.a.createElement("button",{type:"button",className:"btn",onClick:function(){return l(e)}},r.a.createElement("i",{className:"material-icons left"},"add_shopping_cart"),"\u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443",r.a.createElement("span",null," \u20bd ",e.price))))}))))})),X=a(24),z={addToCart:x,removeFromCart:function(e){return{type:f,payload:{product:e}}},removeItemFromCart:function(e){return{type:v,payload:{product:e}}},removeAllCart:function(e){return{type:b,payload:{}}}},G=Object(l.b)((function(e){return{products:e.cart}}),z)((function(e){var t=e.products,a=e.addToCart,c=e.removeFromCart,o=e.removeItemFromCart,l=e.removeAllCart,u=Object(n.useState)(0),s=Object(X.a)(u,2),i=s[0],m=s[1],d=function(e){var t=e.count,n=e.price;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"\u0426\u0435\u043d\u0430: \u20bd ",+(t*n).toFixed(2).toString()),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"button",className:"col btn-floating red py-0",onClick:function(){return function(e){e.count>1&&c(e)}(e)}},r.a.createElement("i",{className:"material-icons"},"remove")),r.a.createElement("div",{className:"col s6 py-10"},r.a.createElement("input",{type:"text",onChange:function(t){return function(e,t){var n=parseInt(e.target.value);!isNaN(n)&&n>0&&a(t,n)}(t,e)},value:t})),r.a.createElement("button",{type:"button",className:"col btn-floating green py-0",onClick:function(){return a(e)}},r.a.createElement("i",{className:"material-icons"},"add"))),r.a.createElement("button",{type:"button",className:"btn",onClick:function(){return o(e)}},r.a.createElement("i",{className:"material-icons left"},"delete_forever"),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))};return Object(n.useEffect)((function(){var e=t.reduce((function(e,t){return e+t.price*t.count}),0);m(e.toFixed(2))}),[t]),r.a.createElement("div",{className:"container"},t.length?r.a.createElement("div",null,r.a.createElement("h2",null,"\u0422\u043e\u0432\u0430\u0440\u044b \u0432 \u0432\u0430\u0448\u0435\u0439 \u043a\u043e\u0440\u0437\u0438\u043d\u0435"),r.a.createElement("h4",null,"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u043e\u0432: \u20bd ",i.toString()),r.a.createElement("button",{type:"button",className:"btn mb-3",onClick:function(){l()}},r.a.createElement("i",{className:"material-icons left"},"delete_forever"),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"),r.a.createElement("div",{className:"row"},t.map((function(e,t){return r.a.createElement("div",{key:t,className:"col s12 m6 l4"},r.a.createElement(B,{product:e},d(e)))})))):r.a.createElement("h2",null,"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"))})),H=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"))},K=function(e){var t=e.cart,a=Object(n.useState)(0),c=Object(X.a)(a,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){var e=0;t.forEach((function(t){return e+=t.count})),l(e)}),[t]),r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(q.b,{to:"/products"},"\u0422\u043e\u0432\u0430\u0440\u044b")),r.a.createElement("li",null,r.a.createElement(q.b,{to:"/cart"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 ",o||null))))))},W=Object(l.b)((function(e){return{cart:e.cart}}),{requestProducts:w})((function(e){var t=e.cart;e.requestProducts;return r.a.createElement(q.a,{basename:"/"},r.a.createElement(K,{cart:t}),r.a.createElement(M.d,null,r.a.createElement(M.b,{path:"/products",component:Q}),r.a.createElement(M.b,{path:"/cart",component:G}),">",r.a.createElement(M.b,{component:H})),r.a.createElement(M.b,{exact:!0,path:"/"},r.a.createElement(M.a,{to:"/products"})))})),Y=function(e,t,a){var n=[];if("form"===a)for(var r=document.getElementById("form-dealers").querySelectorAll(".ch-dealers"),c=0;c<r.length;c++)r[c].checked&&n.push(r[c].value);else n=e.detail?e.detail:[];document.getElementById("start-app").remove(),t(n)},Z=(a(72),Object(s.a)()),$=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d)(Object(u.a)(Z)),ee=function(e){var t=Object(u.e)(j,{dealers:e},$);Z.run(D),o.a.render(r.a.createElement(l.a,{store:t},r.a.createElement(W,null)),document.getElementById("root"))};window.eventAPP=new CustomEvent("app_load",{detail:["0c4aab30"]}),document.getElementById("start-btn").addEventListener("click",(function(e){return Y(e,ee,"form")})),document.addEventListener("app_load",(function(e){return Y(e,ee)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.87b7edbb.chunk.js.map