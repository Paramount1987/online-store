(this["webpackJsonponline-store"]=this["webpackJsonponline-store"]||[]).push([[0],{43:function(e,t,a){e.exports=a(73)},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),l=a(13),u=a(10),i=a(42),s=a(16),m="REQUEST_PRODUCTS",d="REQUEST_SUCCESS_PRODUCTS",p="REQUEST_FAIL_PRODUCTS",E="ADD_CART",f="REMOVE_CART",v="REMOVE_ITEM_CART",b="REMOVE_ALL_CART",g={isLoading:!1,data:[]},O=a(15),h=function(e){localStorage.setItem("cart",JSON.stringify(e))},y=function(){return JSON.parse(localStorage.getItem("cart"))||[]},N=Object(u.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case m:return Object(s.a)({},e,{isLoading:!0});case d:return Object(s.a)({},e,{data:n.data,isLoading:!1});case p:return Object(s.a)({},e,{isLoading:!1});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y(),t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case E:var r=n.product,c=n.count,o=e.findIndex((function(e){return e.name===r.name}));if(-1===o){var l=e.concat(Object(s.a)({},r,{count:1}));return h(l),l}return c?e[o].count=c:e[o].count++,h(Object(O.a)(e)),Object(O.a)(e);case f:var u=n.product,i=e.findIndex((function(e){return e.name===u.name}));return e[i].count--,h(Object(O.a)(e)),Object(O.a)(e);case v:var m=n.product,d=e.findIndex((function(e){return e.name===m.name}));return e.splice(d,1),h(Object(O.a)(e)),Object(O.a)(e);case b:return h([]),[];default:return e}},dealers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];arguments.length>1&&arguments[1];return e}}),j=a(19),C=a.n(j),_=a(20);function S(e){return{type:m,payload:{dealers:e}}}function w(e){return{type:d,payload:{data:e}}}function k(e,t){return{type:E,payload:{product:e,count:t}}}var x=a(40),T=a.n(x),I="https://murmuring-tor-81614.herokuapp.com/api",L={getProducts:function(e){var t=e&&e.length?"".concat(I,"/goods/?dealers=").concat(e):"".concat(I,"/goods");return T.a.get(t).then((function(e){return e.data}))},URL:"https://murmuring-tor-81614.herokuapp.com"},R=C.a.mark(A),P=C.a.mark(U);function A(e){var t,a;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload.dealers,n.next=4,Object(_.a)(L.getProducts,t);case 4:return a=n.sent,n.next=7,Object(_.b)(w(a));case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(_.b)((n.t0,{type:p,payload:{isLoading:!1}}));case 13:case"end":return n.stop()}}),R,null,[[0,9]])}function U(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.c)(m,A);case 2:case"end":return e.stop()}}),P)}var F=U,D=a(18),q=a(14),M=function(e){var t=e.product,a=e.children;return r.a.createElement("div",{className:"card px-20"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(L.URL).concat(t.image,")")},className:"bg-img"}),r.a.createElement("h4",null,t.name),a)},B=function(){return r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"indeterminate"}))},J={requestProducts:S,addToCart:k},V=Object(l.b)((function(e){return{products:e.products.data,dealers:e.dealers,isLoading:e.products.isLoading}}),J)((function(e){var t=e.products,a=e.dealers,c=e.isLoading,o=e.requestProducts,l=e.addToCart;return Object(n.useEffect)((function(){o(a)}),[]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col",s:12},r.a.createElement("h1",null,"\u0422\u043e\u0432\u0430\u0440\u044b"))),r.a.createElement("div",{className:"row"},c?r.a.createElement(B,null):t.map((function(e,t){return r.a.createElement("div",{key:t,className:"col s12 m6 l4 mb-3"},r.a.createElement(M,{product:e},r.a.createElement("button",{type:"button",className:"btn",onClick:function(){return l(e)}},r.a.createElement("i",{className:"material-icons left"},"add_shopping_cart"),"\u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443",r.a.createElement("span",null," \u20bd ",e.price))))}))))})),Q=a(24),X={addToCart:k,removeFromCart:function(e){return{type:f,payload:{product:e}}},removeItemFromCart:function(e){return{type:v,payload:{product:e}}},removeAllCart:function(e){return{type:b,payload:{}}}},z=Object(l.b)((function(e){return{products:e.cart}}),X)((function(e){var t=e.products,a=e.addToCart,c=e.removeFromCart,o=e.removeItemFromCart,l=e.removeAllCart,u=Object(n.useState)(0),i=Object(Q.a)(u,2),s=i[0],m=i[1],d=function(e){var t=e.count,n=e.price;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"\u0426\u0435\u043d\u0430: \u20bd ",+(t*n).toFixed(2).toString()),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"button",className:"col btn-floating red py-0",onClick:function(){return function(e){e.count>1&&c(e)}(e)}},r.a.createElement("i",{className:"material-icons"},"remove")),r.a.createElement("div",{className:"col s6 py-10"},r.a.createElement("input",{type:"text",onChange:function(t){return function(e,t){var n=parseInt(e.target.value);!isNaN(n)&&n>0&&a(t,n)}(t,e)},value:t})),r.a.createElement("button",{type:"button",className:"col btn-floating green py-0",onClick:function(){return a(e)}},r.a.createElement("i",{className:"material-icons"},"add"))),r.a.createElement("button",{type:"button",className:"btn",onClick:function(){return o(e)}},r.a.createElement("i",{className:"material-icons left"},"delete_forever"),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))};return Object(n.useEffect)((function(){var e=t.reduce((function(e,t){return e+t.price*t.count}),0);m(e.toFixed(2))}),[t]),r.a.createElement("div",{className:"container"},t.length?r.a.createElement("div",null,r.a.createElement("h2",null,"\u0422\u043e\u0432\u0430\u0440\u044b \u0432 \u0432\u0430\u0448\u0435\u0439 \u043a\u043e\u0440\u0437\u0438\u043d\u0435"),r.a.createElement("h4",null,"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u043e\u0432: \u20bd ",s.toString()),r.a.createElement("button",{type:"button",className:"btn mb-3",onClick:function(){l()}},r.a.createElement("i",{className:"material-icons left"},"delete_forever"),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"),r.a.createElement("div",{className:"row"},t.map((function(e,t){return r.a.createElement("div",{key:t,className:"col s12 m6 l4"},r.a.createElement(M,{product:e},d(e)))})))):r.a.createElement("h2",null,"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"))})),G=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"))},H=function(e){var t=e.cart,a=Object(n.useState)(0),c=Object(Q.a)(a,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){var e=0;t.forEach((function(t){return e+=t.count})),l(e)}),[t]),r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(D.b,{to:"/products"},"\u0422\u043e\u0432\u0430\u0440\u044b")),r.a.createElement("li",null,r.a.createElement(D.b,{to:"/cart"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 ",o||null))))))},K=Object(l.b)((function(e){return{cart:e.cart}}),{requestProducts:S})((function(e){var t=e.cart;e.requestProducts;return r.a.createElement(D.a,{basename:"/online-store/build/"},r.a.createElement(H,{cart:t}),r.a.createElement(q.d,null,r.a.createElement(q.b,{path:"/products",component:V}),r.a.createElement(q.b,{path:"/cart",component:z}),r.a.createElement(q.b,{component:G})),r.a.createElement(q.b,{exact:!0,path:"/"},r.a.createElement(q.a,{to:"/products"})))})),W=function(e,t,a){var n=[];if("form"===a)for(var r=document.getElementById("form-dealers").querySelectorAll(".ch-dealers"),c=0;c<r.length;c++)r[c].checked&&n.push(r[c].value);else n=e.detail?e.detail:[];document.getElementById("start-app").remove(),t(n)},Y=(a(72),Object(i.a)()),Z=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d)(Object(u.a)(Y)),$=function(e){var t=Object(u.e)(N,{dealers:e},Z);Y.run(F),o.a.render(r.a.createElement(l.a,{store:t},r.a.createElement(K,null)),document.getElementById("root"))};window.eventAPP=new CustomEvent("app_load",{detail:["0c4aab30"]}),document.getElementById("start-btn").addEventListener("click",(function(e){return W(e,$,"form")})),document.addEventListener("app_load",(function(e){return W(e,$)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.c7dce16e.chunk.js.map